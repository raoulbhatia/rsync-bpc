NEWS for rsync-bpc-3.0.9.

3.0.9.15 released 20 Jun 2020:

   - add xattr support on directories and symlinks

   - remove old xattr when updating, and also when setting empty ACL

   - fix for restore of migrated v3 backup

   - fix from rsync-3.2.0dev to get correct file ndx for xattr fetching
     from sender when need_unsorted_flist == 1; fixes incorrect file
     indexing rsync bug when long xattr values are fetched

   - fixed attrib refCnt when attrib is unchanged

   - bpc_attrib_dirWrite() doesn't create empty attrib files

   - force rewrite of attr file if xattr key fixup was applied

   - mkdir sets mtime to current time if --omit-dir-times

   - bpc_sysCall_checkFileMatch() only prints missing file warning if size > 0

   - fix to bpc_lstat() that returned wrong type for socket

   - ensure bpc_lsetxattr() only returns 0 or -1

   - replaced AC_HEADER_MAJOR with check for sys/mkdev.h and sys/sysmacros.h
     to avoid compiler warnings

   - fix compiler warnings about possible snprintf() truncation

3.0.9.14 released 8 Jul 2019:

   - fix to use correct int format when reading v3 attrib files

   - allow mtime to be signed in attrib files

   - remove any extraneous BPC_FTYPE_DELETED file types in non-merged backup

3.0.9.13 released 25 Nov 2018:

   - on inflate error, first return any remaining bytes before returning an error.

   - bpc_attrib_dirWrite() updates dir->digest with new digest.

3.0.9.12 released 27 Jan 2018:

   - in bpc_read() ensure we don't read past the end of the buffer, in case actual file's
     size is less than the attribute file size.

3.0.9.11 released 13 Dec 2017:

    - ensure hlink_nlinks is non-NULL before using it.

3.0.9.10 released 5 Dec 2017:

    - only call hard_link_bpc_update_link_count() if preserve_hard_links; patch from @ovidiustanila.

3.0.9.9 released 3 Dec 2017:

    - during cleanup, generator now checks the backuppc inode hardlink counts to make sure they match
      the number of identical hardlinks transferred.

    - updated backuppc library to capture changes in backup-xs (no effect on rsync-bpc).

3.0.9.8 released 11 Jun 2017:

    - fixed version number in configure.ac and configure.sh, which was incorrectly left at 3.0.9.6
      in the 3.0.9.7 release.

3.0.9.7 released 25 May 2017:

    - fixed reference counting bug in bpc_unlink()

    - fixed memory leak on file open fail in backuppc/bpc_fileZIO.c, and minor leak in backuppc/bpc_dirOps.c

3.0.9.6 released 23 Mar 2017:

    - updates to bpc_attribCache to sanitize path names and prepending ac->currentDir
      in bpc_attribCache_getDirEntries().  Fixes certain restore cases.

3.0.9.5 released 3 Mar 2017:

    - Reference counting is now per-backup; replaced static delta information with callable interface.

    - Attribute files are now zero-length with the md5 digest encoded in the file name.

3.0.9.4 released 18 Jun 2016:

    - changes to backuppc/bpc_hashTable so that resizing doesn't move the entries. The nodes are stored as
      pointers (rather than flat); a freelist maintains unused nodes.

3.0.9.3 released 1 Dec 2013:

    - Fixed bug in merging of V3 incrementals during restore.  Reported by
      Denis Jedig and Steve Palm.

3.0.9.2 released 16 Sep 2013:

    - increased BPC_POOL_WRITE_CONCURRENT_MATCH from 4 to 16.

    - increased log threshold in bpc_lib_conf_init from 3 to 8.

3.0.9.1 released 1 Jul 2013:

    - no changes.

3.0.9.0 released 24 June 2013:

    - Initial version based on rsync 3.0.9, plus rsync-patches-3.0.9.tar.gz (23-Sep-2011 10:46).

NEWS for rsync 3.0.9 (23 Sep 2011)
Protocol: 30 (unchanged)
Changes since 3.0.8:

  BUG FIXES:

    - Fix a crash bug in checksum scanning when --inplace is used.

    - Fix a hang if a hard-linked file cannot be opened by the sender (e.g.
      if it has no read permission).

    - Fix preservation of a symlink's system xattrs (e.g. selinux) on Linux.

    - Fix a memory leak in the xattr code.

    - Fixed a bug with --delete-excluded when a filter merge file has a rule
      that specifies a receiver-only side restriction.

    - Fix a bug with the modifying of unwritable directories.

    - Fix --fake-super's interaction with --link-dest same-file comparisons.

    - Fix the updating of the curr_dir buffer to avoid a duplicate slash.

    - Fix the directory permissions on an implied dot-dir when using --relative
      (e.g. /outside/path/././send/path).

    - Fixed some too-long sleeping instances when using --bwlimit.

    - Fixed when symlink ownership difference-checking gets compiled into
      unchanged_attrs().

    - Improved the socket-error reporting when multiple protocols fail.

    - Fixed a case where a socket error could reference just-freed memory.

    - Failing to use a password file that was specified on the command-line is
      now a fatal error.

    - Fix the non-root updating of directories that don't have the read and/or
      execute permission.

    - Make daemon-excluded file errors more error-like.

    - Fix a compilation issue on older C compilers (due to a misplaced var
      declaration).

    - Make configure avoid finding socketpair on cygwin.

    - Avoid trying to reference SO_BROADCAST if the OS doesn't support it.

    - Fix some issues with the post-processing of the man pages.

    - Fixed the user home-dir handling in the support/lsh script.

    - Some minor manpage improvements.
